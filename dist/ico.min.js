/*! icojs v0.2.0 (c) 2015 egy186; MIT license */
!function(a){"use strict";function b(a){for(var b=new Uint8Array(a),c="",d=0;d<b.byteLength;d++)c+=("000000000"+b[d].toString(2)).slice(-8);return c.split("").map(function(a){return parseInt(a,2)})}function c(a){for(var b=new Uint8Array(a),c="",d=0;d<b.byteLength;d++)c+=("00"+b[d].toString(16)).slice(-2);return c.split("").map(function(a){return parseInt(a,16)})}function d(a){for(var b=new Uint8Array(a),c=[],d=0;d<b.byteLength;d++)c.push(b[d]);return c}function e(b){for(var c=a.atob(b.replace(/.+,/,"")),d=new Uint8Array(c.length),e=0;e<c.length;e++)d[e]=c.charCodeAt(e);return{type:b.replace(/data:/,"").replace(/;.+/,""),buffer:d.buffer}}function f(a,b){var c=new DataView(a),e={width:c.getUint8(6+16*b)||256,height:c.getUint8(7+16*b)||256,colorCount:c.getUint8(8+16*b)},f=c.getUint32(14+16*b,!0),g=c.getUint32(18+16*b,!0),h=a.slice(g,g+f),i=new DataView(h),j=i.getUint32(0,!0),k=i.getUint32(32,!0);e.bit=i.getUint16(14,!0),e.colors=[];for(var l=0;k>l;l++)e.colors.push(d(h.slice(j+4*l,j+4*l+4)));var m=j+4*k,n=e.width*e.bit/8;n%4!==0&&(n+=4-n%4);var o=m+n*e.height;e.xor=h.slice(m,o);var p=e.width/8;return p%4!==0&&(p+=4-p%4),e.and=h.slice(o,o+p*e.height),e}var g=function(a){var b=new DataView(a);return 0===b.getUint16(0,!0)&&1===b.getUint16(2,!0)},h=function(a){var h=new DataView(a);if(!g(a))throw new Error("Not valid ICO");var i,j,k,l,m,n,o,p,q,r,s,t,u=[];for(i=0;i<h.getUint16(4,!0);i++){switch(m=f(a,i),m.and=b(m.and),o=m.width*m.bit/8,o%4!==0&&(o+=4-o%4),o*=8/m.bit,p=m.width/8,p%4!==0&&(p+=4-p%4),p*=8,q=document.createElement("canvas"),q.width=m.width,q.height=m.height,r=q.getContext("2d"),s=r.createImageData(q.width,q.height),t=s.data,m.bit){case 1:for(m.xor=b(m.xor),l=0,j=m.height-1;j>=0;j--)for(k=0;k<m.width;k++)n=m.colors[m.xor[j*o+k]],t[4*l]=n[2],t[4*l+1]=n[1],t[4*l+2]=n[0],t[4*l+3]=m.and[j*p+k]?0:255,l++;break;case 4:for(m.xor=c(m.xor),l=0,j=m.height-1;j>=0;j--)for(k=0;k<m.width;k++)n=m.colors[m.xor[j*o+k]],t[4*l]=n[2],t[4*l+1]=n[1],t[4*l+2]=n[0],t[4*l+3]=m.and[j*p+k]?0:255,l++;break;case 8:for(m.xor=d(m.xor),l=0,j=m.height-1;j>=0;j--)for(k=0;k<m.width;k++)n=m.colors[m.xor[j*o+k]],t[4*l]=n[2],t[4*l+1]=n[1],t[4*l+2]=n[0],t[4*l+3]=m.and[j*p+k]?0:255,l++;break;case 24:for(m.xor=d(m.xor),l=0,j=m.height-1;j>=0;j--)for(k=0;k<m.width;k++)t[4*l]=m.xor[3*(j*o+k)+2],t[4*l+1]=m.xor[3*(j*o+k)+1],t[4*l+2]=m.xor[3*(j*o+k)],t[4*l+3]=m.and[j*p+k]?0:255,l++;break;case 32:for(m.xor=d(m.xor),l=0,j=m.height-1;j>=0;j--)for(k=0;k<m.width;k++)t[4*l]=m.xor[4*(j*o+k)+2],t[4*l+1]=m.xor[4*(j*o+k)+1],t[4*l+2]=m.xor[4*(j*o+k)],t[4*l+3]=1===m.and[j*p+k]||1===m.xor[4*(j*o+k)+3]?0:m.xor[4*(j*o+k)+3]>1?m.xor[4*(j*o+k)+3]:255,l++}r.putImageData(s,0,0),m.imageData=s;var v=e(q.toDataURL());u.push({bit:m.bit,width:m.width,height:m.height,type:v.type,buffer:v.buffer})}return u};a.ico={Parse:h,isIco:g}}(this);
//# sourceMappingURL=ico.min.js.map